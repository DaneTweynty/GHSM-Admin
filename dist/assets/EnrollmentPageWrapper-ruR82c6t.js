import{j as e,g as a,u as t}from"./chat-Vz45qIYd.js";import{r}from"./ui-CcSG_NNb.js";import{T as n,c as s,a as i,t as o,b as d,C as l}from"./management-BDKX1h-L.js";import"./vendor-DEQ385Nk.js";import"./calendar-CdK-zQpj.js";const c={provinces:[{code:"1263",name:"South Cotabato",region:"Region XII (SOCCSKSARGEN)",regionCode:"12",psgcCode:"126300000"},{code:"0137",name:"Metro Manila",region:"National Capital Region (NCR)",regionCode:"13",psgcCode:"137400000"},{code:"0421",name:"Cavite",region:"Region IV-A (CALABARZON)",regionCode:"04",psgcCode:"042100000"},{code:"0434",name:"Laguna",region:"Region IV-A (CALABARZON)",regionCode:"04",psgcCode:"043400000"},{code:"0456",name:"Batangas",region:"Region IV-A (CALABARZON)",regionCode:"04",psgcCode:"045600000"},{code:"0515",name:"Quezon",region:"Region IV-A (CALABARZON)",regionCode:"04",psgcCode:"051500000"},{code:"0669",name:"Rizal",region:"Region IV-A (CALABARZON)",regionCode:"04",psgcCode:"066900000"},{code:"1041",name:"Bulacan",region:"Region III (Central Luzon)",regionCode:"03",psgcCode:"104100000"}],cities:[{code:"126301",name:"Banga",provinceCode:"1263",regionCode:"12"},{code:"126302",name:"General Santos City",provinceCode:"1263",regionCode:"12"},{code:"126303",name:"Koronadal City",provinceCode:"1263",regionCode:"12"},{code:"126304",name:"Lake Sebu",provinceCode:"1263",regionCode:"12"},{code:"126305",name:"Norala",provinceCode:"1263",regionCode:"12"},{code:"126306",name:"Polomolok",provinceCode:"1263",regionCode:"12"},{code:"126307",name:"Santo Niño",provinceCode:"1263",regionCode:"12"},{code:"126308",name:"Surallah",provinceCode:"1263",regionCode:"12"},{code:"126309",name:"T'Boli",provinceCode:"1263",regionCode:"12"},{code:"126310",name:"Tampakan",provinceCode:"1263",regionCode:"12"},{code:"126311",name:"Tantangan",provinceCode:"1263",regionCode:"12"},{code:"126312",name:"Tupi",provinceCode:"1263",regionCode:"12"},{code:"137401",name:"Caloocan City",provinceCode:"0137",regionCode:"13"},{code:"137402",name:"Las Piñas City",provinceCode:"0137",regionCode:"13"},{code:"137403",name:"Makati City",provinceCode:"0137",regionCode:"13"},{code:"137404",name:"Malabon City",provinceCode:"0137",regionCode:"13"},{code:"137405",name:"Mandaluyong City",provinceCode:"0137",regionCode:"13"},{code:"137406",name:"Manila",provinceCode:"0137",regionCode:"13"},{code:"137407",name:"Marikina City",provinceCode:"0137",regionCode:"13"},{code:"137408",name:"Muntinlupa City",provinceCode:"0137",regionCode:"13"},{code:"137409",name:"Navotas City",provinceCode:"0137",regionCode:"13"},{code:"137410",name:"Parañaque City",provinceCode:"0137",regionCode:"13"},{code:"137411",name:"Pasay City",provinceCode:"0137",regionCode:"13"},{code:"137412",name:"Pasig City",provinceCode:"0137",regionCode:"13"},{code:"137413",name:"Pateros",provinceCode:"0137",regionCode:"13"},{code:"137414",name:"Quezon City",provinceCode:"0137",regionCode:"13"},{code:"137415",name:"San Juan City",provinceCode:"0137",regionCode:"13"},{code:"137416",name:"Taguig City",provinceCode:"0137",regionCode:"13"},{code:"137417",name:"Valenzuela City",provinceCode:"0137",regionCode:"13"},{code:"042101",name:"Alfonso",provinceCode:"0421",regionCode:"04"},{code:"042102",name:"Amadeo",provinceCode:"0421",regionCode:"04"},{code:"042103",name:"Bacoor",provinceCode:"0421",regionCode:"04"},{code:"042104",name:"Carmona",provinceCode:"0421",regionCode:"04"},{code:"042105",name:"Cavite City",provinceCode:"0421",regionCode:"04"},{code:"042106",name:"Dasmariñas",provinceCode:"0421",regionCode:"04"},{code:"042107",name:"General Emilio Aguinaldo",provinceCode:"0421",regionCode:"04"},{code:"042108",name:"General Mariano Alvarez",provinceCode:"0421",regionCode:"04"},{code:"042109",name:"General Trias",provinceCode:"0421",regionCode:"04"},{code:"042110",name:"Imus",provinceCode:"0421",regionCode:"04"}],barangays:[{code:"126301001",name:"Poblacion",cityCode:"126301",provinceCode:"1263",regionCode:"12"},{code:"126301002",name:"Libertad",cityCode:"126301",provinceCode:"1263",regionCode:"12"},{code:"126301003",name:"Sandawa",cityCode:"126301",provinceCode:"1263",regionCode:"12"},{code:"126301004",name:"Tubuan",cityCode:"126301",provinceCode:"1263",regionCode:"12"},{code:"126302001",name:"Apopong",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302002",name:"Baluan",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302003",name:"Buayan",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302004",name:"Bula",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302005",name:"Calumpang",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302006",name:"City Heights",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302007",name:"Conel",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302008",name:"Dadiangas East",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302009",name:"Dadiangas North",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302010",name:"Dadiangas South",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"126302011",name:"Dadiangas West",cityCode:"126302",provinceCode:"1263",regionCode:"12"},{code:"137401001",name:"Bagbag",cityCode:"137401",provinceCode:"0137",regionCode:"13"},{code:"137401002",name:"Bagumbayan",cityCode:"137401",provinceCode:"0137",regionCode:"13"},{code:"137401003",name:"Bagumbuhay",cityCode:"137401",provinceCode:"0137",regionCode:"13"},{code:"137401004",name:"Baliwag",cityCode:"137401",provinceCode:"0137",regionCode:"13"},{code:"137401005",name:"Camarin",cityCode:"137401",provinceCode:"0137",regionCode:"13"},{code:"137403001",name:"Bangkal",cityCode:"137403",provinceCode:"0137",regionCode:"13"},{code:"137403002",name:"Bel-Air",cityCode:"137403",provinceCode:"0137",regionCode:"13"},{code:"137403003",name:"Cembo",cityCode:"137403",provinceCode:"0137",regionCode:"13"},{code:"137403004",name:"Comembo",cityCode:"137403",provinceCode:"0137",regionCode:"13"},{code:"137403005",name:"Dasmarinas Village",cityCode:"137403",provinceCode:"0137",regionCode:"13"},{code:"137414001",name:"Alicia",cityCode:"137414",provinceCode:"0137",regionCode:"13"},{code:"137414002",name:"Bagbag",cityCode:"137414",provinceCode:"0137",regionCode:"13"},{code:"137414003",name:"Bagong Lipunan ng Crame",cityCode:"137414",provinceCode:"0137",regionCode:"13"},{code:"137414004",name:"Bagong Pag-asa",cityCode:"137414",provinceCode:"0137",regionCode:"13"},{code:"137414005",name:"Bagong Silangan",cityCode:"137414",provinceCode:"0137",regionCode:"13"},{code:"042103001",name:"Aniban I",cityCode:"042103",provinceCode:"0421",regionCode:"04"},{code:"042103002",name:"Aniban II",cityCode:"042103",provinceCode:"0421",regionCode:"04"},{code:"042103003",name:"Aniban III",cityCode:"042103",provinceCode:"0421",regionCode:"04"},{code:"042103004",name:"Aniban IV",cityCode:"042103",provinceCode:"0421",regionCode:"04"},{code:"042103005",name:"Aniban V",cityCode:"042103",provinceCode:"0421",regionCode:"04"}]};let u=null,m=null,x=null;function p(){return u||(u=c.provinces.map(e=>({code:e.code,name:e.name,region:e.region,regionCode:e.regionCode,psgcCode:e.psgcCode})),u)}function g(){return m||(m=c.cities.map(e=>({code:e.code,name:e.name,provinceCode:e.provinceCode,regionCode:e.regionCode})),m)}function h(){return x||(x=c.barangays.map(e=>({code:e.code,name:e.name,cityCode:e.cityCode,provinceCode:e.provinceCode,regionCode:e.regionCode})),x)}class v{static async getProvinces(){return Promise.resolve(p())}static async getCitiesByProvince(e){const a=g().filter(a=>a.provinceCode===e);return Promise.resolve(a)}static async getBarangaysByCity(e){const a=h().filter(a=>a.cityCode===e);return Promise.resolve(a)}static async searchProvinces(e){const a=p().filter(a=>a.name.toLowerCase().includes(e.toLowerCase())||a.region.toLowerCase().includes(e.toLowerCase()));return Promise.resolve(a)}static async searchCities(e,a){let t=g();return a&&(t=t.filter(e=>e.provinceCode===a)),t=t.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())),Promise.resolve(t)}static async searchBarangays(e,a){let t=h();return a&&(t=t.filter(e=>e.cityCode===a)),t=t.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())),Promise.resolve(t)}static async getAddressHierarchy(){return Promise.resolve({provinces:p(),cities:g(),barangays:h()})}static async getProvinceByCode(e){const a=p().find(a=>a.code===e);return Promise.resolve(a||null)}static async getCityByCode(e){const a=g().find(a=>a.code===e);return Promise.resolve(a||null)}static async getBarangayByCode(e){const a=h().find(a=>a.code===e);return Promise.resolve(a||null)}static getCacheStatus(){return{provinces:{cached:!!u,count:(null==u?void 0:u.length)||0},cities:{cached:!!m,count:(null==m?void 0:m.length)||0},barangays:{cached:!!x,count:(null==x?void 0:x.length)||0}}}static clearCache(){u=null,m=null,x=null}static async preloadData(){p(),g(),h()}}function b(e){const a=e.replace(/\D/g,"");return!(11!==a.length||!a.startsWith("09"))||!(12!==a.length||!a.startsWith("639"))}function y(e){const a=e.replace(/\D/g,"");return 11===a.length&&a.startsWith("09")?`${a.substring(0,4)} ${a.substring(4,7)} ${a.substring(7)}`:12===a.length&&a.startsWith("639")?`+${a.substring(0,2)} ${a.substring(2,5)} ${a.substring(5,8)} ${a.substring(8)}`:e}const C=({address:a={},onChange:t,disabled:l=!1,className:c="",errors:u={}})=>{const[m,x]=r.useState([]),[p,g]=r.useState([]),[h,b]=r.useState([]),[y,C]=r.useState(a.country||"Philippines"),[f,j]=r.useState(a.province||""),[N,k]=r.useState(a.city||""),[S,w]=r.useState(a.barangay||""),[P,G]=r.useState(a.addressLine1||""),[B,L]=r.useState(a.addressLine2||""),[A,I]=r.useState(!0),[$,E]=r.useState(!1),[R,M]=r.useState(!1),X=r.useCallback(()=>{t({country:y,province:f,city:N,barangay:S,addressLine1:P,addressLine2:B})},[y,f,N,S,P,B,t]);r.useEffect(()=>{(async()=>{try{I(!0);const e=await v.getProvinces();x(e)}catch(e){x([])}finally{I(!1)}})()},[]),r.useEffect(()=>{(async()=>{if(f&&m.length>0)try{E(!0);const e=m.find(e=>e.name===f);if(e){const a=await v.getCitiesByProvince(e.code);g(a)}else g([])}catch(e){g([])}finally{E(!1)}else g([]),E(!1)})()},[f,m]),r.useEffect(()=>{(async()=>{if(N&&p.length>0)try{M(!0);const e=p.find(e=>e.name===N);if(e){const a=await v.getBarangaysByCity(e.code);b(a)}else b([])}catch(e){b([])}finally{M(!1)}else b([]),M(!1)})()},[N,p]),r.useEffect(()=>{const e=setTimeout(()=>{X()},100);return()=>clearTimeout(e)},[X]);const F=r.useCallback(e=>{j(e),k(""),w(""),g([]),b([])},[]),O=r.useCallback(e=>{k(e),w(""),b([])},[]),D=r.useCallback(e=>{w(e)},[]),T=r.useCallback(e=>{C(e)},[]),z=r.useCallback(e=>{G(e)},[]),q=r.useCallback(e=>{L(e)},[]),V=m.map(e=>({value:e.name,label:`${e.name} (${e.region})`})),H=p.map(e=>({value:e.name,label:e.name})),W=h.map(e=>({value:e.name,label:e.name}));return e.jsxs("div",{className:`space-y-4 ${c}`,children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",children:["Country ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsxs(n,{value:y,onChange:e=>T(e.target.value),disabled:l,children:[e.jsx("option",{value:"",children:"Select country"}),[{value:"Philippines",label:"Philippines"}].map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",children:["Province ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsxs(n,{value:f,onChange:e=>F(e.target.value),disabled:l||A,children:[e.jsx("option",{value:"",children:A?"Loading provinces...":"Select province"}),V.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),u.province&&e.jsx("div",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:u.province}),A&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Loading provinces..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",children:["City/Municipality ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsxs(n,{value:N,onChange:e=>O(e.target.value),disabled:l||!f||$,children:[e.jsx("option",{value:"",children:f?$?"Loading cities...":"Select city/municipality":"Select province first"}),H.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),u.city&&e.jsx("div",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:u.city}),$&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Loading cities..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",children:["Barangay ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsxs(n,{value:S,onChange:e=>D(e.target.value),disabled:l||!N||R,children:[e.jsx("option",{value:"",children:N?R?"Loading barangays...":"Select barangay":"Select city first"}),W.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),u.barangay&&e.jsx("div",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:u.barangay}),R&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Loading barangays..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",children:["Address Line 1 (Street, Building, etc.) ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsx("input",{type:"text",value:P,onChange:e=>z(e.target.value),disabled:l,placeholder:"Enter street address, building name, etc.",className:s}),u.addressLine1&&e.jsx("div",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:u.addressLine1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",children:"Address Line 2 (Optional)"}),e.jsx("input",{type:"text",value:B,onChange:e=>q(e.target.value),disabled:l,placeholder:"Additional address information (optional)",className:s})]}),(f||N||S||P)&&e.jsx("div",{className:i(d,"mt-4"),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("svg",{className:"w-5 h-5 text-brand-primary mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:i(o,"text-sm font-medium mb-2"),children:"Complete Address"}),e.jsxs("div",{className:"space-y-2",children:[(P||B)&&e.jsxs("div",{className:"text-sm",children:[P&&e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 leading-relaxed",children:P}),B&&e.jsx("div",{className:"text-text-secondary dark:text-gray-300 leading-relaxed",children:B})]}),(S||N||f)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[S&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),"Barangay ",S]}),N&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm3 2a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm0 4a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1z",clipRule:"evenodd"})}),N]}),f&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z",clipRule:"evenodd"})}),f]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 pt-1 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z",clipRule:"evenodd"})}),y]})})]})]})]})})]})},f=["Mother","Father","Grandmother","Grandfather","Aunt","Uncle","Sister","Brother","Cousin","Guardian","Foster Parent","Step-parent","Other"],j=({guardianType:a,guardian:t={},onChange:n,onRemove:i,disabled:o=!1,showRemoveButton:d=!1,errors:l={},onBlur:c})=>{const[u,m]=r.useState(t.fullName||""),[x,p]=r.useState(t.relationship||""),[g,h]=r.useState(t.phone||""),[v,C]=r.useState(t.email||""),[j,N]=r.useState(t.facebook||""),[k,S]=r.useState(null),w=s,P="block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",G=e=>{const a={fullName:u,relationship:x,phone:g,email:v,facebook:j,...e};n(a)},B="primary"===a,L="primary"===a?"Primary Guardian/Parent":"Secondary Guardian/Parent";return e.jsxs("div",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-base font-semibold text-text-primary dark:text-slate-200",children:[L,B&&e.jsx("span",{className:"text-status-red ml-1",children:"*"})]}),d&&i&&e.jsx("button",{type:"button",onClick:i,className:"text-status-red hover:bg-status-red/10 p-1 rounded-md transition-colors",disabled:o,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:`${a}-fullName`,className:P,children:["Full Name ",B&&e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsx("input",{type:"text",id:`${a}-fullName`,value:u,onChange:e=>{return a=e.target.value,m(a),void G({fullName:a});var a},onBlur:e=>null==c?void 0:c(`${a}GuardianName`,e.target.value),className:w,placeholder:"e.g., Maria Santos",disabled:o}),l.name&&e.jsx("div",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:`${a}-relationship`,className:P,children:["Relationship ",B&&e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsxs("select",{id:`${a}-relationship`,value:x,onChange:e=>{return a=e.target.value,p(a),void G({relationship:a});var a},onBlur:e=>null==c?void 0:c(`${a}GuardianRelationship`,e.target.value),className:w,disabled:o,children:[e.jsx("option",{value:"",children:"Select relationship..."}),f.map(a=>e.jsx("option",{value:a,children:a},a))]}),l.relationship&&e.jsx("div",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:l.relationship})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:`${a}-phone`,className:P,children:["Phone Number ","(Optional)"]}),e.jsx("input",{type:"tel",id:`${a}-phone`,value:g,onChange:e=>{return a=e.target.value,h(a),S(null),void G({phone:a});var a},onBlur:()=>{if(g&&!b(g))S("Please enter a valid Philippine phone number");else if(g){const e=y(g);h(e),G({phone:e})}},className:`${w} ${k?"border-status-red":""}`,placeholder:"e.g., 0917 123 4567",disabled:o}),k&&e.jsx("p",{className:"text-xs text-status-red mt-1",children:k}),e.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Philippine format: 09XX XXX XXXX or +63 9XX XXX XXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`${a}-email`,className:P,children:"Email Address (Optional)"}),e.jsx("input",{type:"email",id:`${a}-email`,value:v,onChange:e=>{return a=e.target.value,C(a),void G({email:a});var a},className:w,placeholder:"e.g., maria.santos@email.com",disabled:o})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:`${a}-facebook`,className:P,children:"Facebook Profile (Optional)"}),e.jsx("input",{type:"text",id:`${a}-facebook`,value:j,onChange:e=>{return a=e.target.value,N(a),void G({facebook:a});var a},className:w,placeholder:"Facebook name or https://facebook.com/...",disabled:o})]})]}),"primary"===a&&e.jsxs("div",{className:"text-xs text-text-secondary dark:text-slate-400 bg-surface-subtle dark:bg-slate-800 p-3 rounded-md",children:[e.jsx("p",{className:"font-medium mb-1",children:"Primary Guardian Information:"}),e.jsx("p",{children:"This person will be contacted in case of emergencies and is the primary point of contact for the student."})]})]})},N=({primaryGuardian:a,secondaryGuardian:t,onPrimaryGuardianChange:n,onSecondaryGuardianChange:s,disabled:i=!1,isMinor:o=!1,errors:d={},onBlur:l})=>{const[c,u]=r.useState(!!t);return e.jsxs("div",{className:"space-y-6",children:[o&&e.jsxs("div",{className:"text-sm text-status-yellow bg-status-yellow-light dark:bg-status-yellow/20 px-3 py-2 rounded-md",children:[e.jsx("p",{className:"font-medium",children:"Minor Student Detected"}),e.jsx("p",{children:"Guardian information is recommended for students under 18 years old."})]}),e.jsx(j,{guardianType:"primary",guardian:a,onChange:n,disabled:i,onBlur:l,errors:{name:d.primaryGuardianName,relationship:d.primaryGuardianRelationship,phone:d.primaryGuardianPhone,email:d.primaryGuardianEmail}}),c?e.jsx(j,{guardianType:"secondary",guardian:t,onChange:s,onRemove:()=>{u(!1),s(void 0)},disabled:i,showRemoveButton:!0}):e.jsxs("div",{className:"text-center",children:[e.jsx("button",{type:"button",onClick:()=>{u(!0),s({})},className:"px-4 py-2 bg-surface-main dark:bg-slate-700 border border-surface-border dark:border-slate-600 rounded-md text-text-primary dark:text-slate-200 hover:bg-black/5 dark:hover:bg-white/5 transition-colors",disabled:i,children:"+ Add Secondary Guardian/Parent"}),e.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-2",children:"Optional: Add a second emergency contact"})]})]})},k=e=>e.replace(/[^\d]/g,""),S=({isOpen:a,onClose:t,onConfirm:r,title:n,message:s,confirmText:i="Continue",cancelText:o="Cancel",type:d="warning"})=>{if(!a)return null;const l=(()=>{switch(d){case"danger":return{icon:"⚠️",iconBg:"bg-red-100 dark:bg-red-900/20",iconColor:"text-red-600 dark:text-red-400",confirmBtn:"bg-red-600 hover:bg-red-700 focus:ring-red-500"};case"warning":return{icon:"⚠️",iconBg:"bg-yellow-100 dark:bg-yellow-900/20",iconColor:"text-yellow-600 dark:text-yellow-400",confirmBtn:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"};default:return{icon:"ℹ️",iconBg:"bg-blue-100 dark:bg-blue-900/20",iconColor:"text-blue-600 dark:text-blue-400",confirmBtn:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}}})();return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white dark:bg-slate-800 shadow-xl transition-all",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:`mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ${l.iconBg}`,children:e.jsx("span",{className:`text-2xl ${l.iconColor}`,children:l.icon})})}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-3 flex flex-col-reverse gap-2 sm:flex-row sm:gap-3 rounded-b-lg",children:[e.jsx("button",{type:"button",className:"w-full rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2",onClick:t,children:o}),e.jsx("button",{type:"button",className:`w-full rounded-md px-4 py-2 text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${l.confirmBtn}`,onClick:()=>{r(),t()},children:i})]})]})})]})},w=({error:a,children:t})=>{const r=a&&a.length>0;return e.jsxs("div",{className:"relative",children:[t,r&&e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1 animate-fadeIn",children:a})]})},P=e=>b(e),G=({instructors:t,students:i,onRequestEnrollment:o,successMessage:d})=>{const[c,u]=r.useState(!1),[m,x]=r.useState(""),[p,g]=r.useState(""),[h,v]=r.useState(""),[b,f]=r.useState(""),[j,G]=r.useState(0),[B,L]=r.useState(""),[A,I]=r.useState(t.length>0?t[0].id:""),[$,E]=r.useState(""),[R,M]=r.useState(""),[X,F]=r.useState(""),[O,D]=r.useState(""),[T,z]=r.useState(""),[q,V]=r.useState({country:"Philippines",province:"",city:"",barangay:"",addressLine1:"",addressLine2:""}),[H,W]=r.useState({fullName:"",relationship:"",phone:"",email:"",facebook:""}),[Y,Z]=r.useState(void 0),J=e=>{V({country:e.country||"Philippines",province:e.province||"",city:e.city||"",barangay:e.barangay||"",addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||""})},K=e=>{W({fullName:e.fullName||"",relationship:e.relationship||"",phone:e.phone||"",email:e.email||"",facebook:e.facebook||""})},Q=e=>{Z(e)},[U,_]=r.useState(null),[ee,ae]=r.useState([]),[te,re]=r.useState(null),[ne,se]=r.useState(!1),[ie,oe]=r.useState({}),[de,le]=r.useState({}),[ce,ue]=r.useState(!1),[me,xe]=r.useState(!1),[pe,ge]=r.useState(null);r.useEffect(()=>{if(b){const e=function(e){const a=new Date;let t=a.getFullYear()-e.getFullYear();const r=a.getMonth()-e.getMonth();return(r<0||0===r&&a.getDate()<e.getDate())&&t--,t}(new Date(b));G(e),E(e.toString())}},[b]);const he=j>0&&j<18,ve=r.useMemo(()=>{if(!c||!m)return[];const e=i.find(e=>e.id===m);if(!e)return[];const a=e.parentStudentId||e.id,t=i.find(e=>e.id===a),r=t?[t.instrument]:[];return i.forEach(e=>{e.parentStudentId===a&&r.push(e.instrument)}),r},[m,i,c]),be=r.useMemo(()=>c?a.filter(e=>!ve.includes(e)):a,[ve,c]),ye=r.useMemo(()=>B?t.filter(e=>Array.isArray(e.specialty)&&e.specialty.includes(B)):t,[B,t]),Ce=r.useMemo(()=>c?!!m:!(!p.trim()||!R||!b&&!$),[c,m,p,R,b,$]),fe=r.useMemo(()=>Ce&&!!B,[Ce,B]),je=r.useCallback((e,a)=>{switch(e){case"selectedExistingStudentId":return c&&!a?"Please select an existing student":"";case"name":if(!c){const e=String(a||"");if(!e||!e.trim())return"Student name is required";if(e.trim().length<2)return"Name must be at least 2 characters";if(!/^[a-zA-Z\s\-.]+$/.test(e.trim()))return"Name can only contain letters, spaces, hyphens, and periods"}return"";case"gender":return c||a?"":"Gender selection is required";case"birthdate":if(!c){if(!a&&!$)return"Either birthdate or age is required";if(a){const e=String(a),t=new Date(e),r=new Date;if(t>r)return"Birthdate cannot be in the future";const n=r.getFullYear()-t.getFullYear();if(n>100)return"Please verify the birthdate (age seems too high)";if(n<3)return"Student must be at least 3 years old"}}return"";case"age":if(!c&&!b&&a){const e=String(a),t=parseInt(e,10);if(isNaN(t))return"Age must be a valid number";if(t<3)return"Student must be at least 3 years old";if(t>100)return"Please verify the age"}return"";case"email":if(a){const e=String(a);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return"Please enter a valid email address"}return"";case"contactNumber":if(a){const e=String(a);if(!P(e))return"Please enter a valid Philippine phone number (e.g., 09123456789)"}return"";case"instrument":return a?"":"Instrument selection is required";case"instructorId":return a?B&&0===ye.length?"No instructors available for selected instrument":"":"Instructor selection is required";case"addressLine1":{const e=String(a||"");return e&&e.trim()?e.trim().length<5?"Please provide a complete street address":"":"Street address is required"}case"province":return a?"":"Province selection is required";case"city":return a?"":"City/Municipality selection is required";case"barangay":return a?"":"Barangay selection is required";case"primaryGuardianName":if(he){if(!H.fullName||!H.fullName.trim())return"Guardian name is required for students under 18";if(H.fullName.trim().length<2)return"Guardian name must be at least 2 characters"}else{if(H.fullName&&!H.fullName.trim())return"Guardian name cannot be empty if provided";if(H.fullName&&H.fullName.trim().length<2)return"Guardian name must be at least 2 characters"}return"";case"primaryGuardianRelationship":if(he){if(!H.relationship)return"Guardian relationship is required for students under 18"}else if(H.fullName&&!H.relationship)return"Guardian relationship is required when guardian name is provided";return"";case"primaryGuardianPhone":return H.fullName&&!H.phone?"Guardian phone is required when guardian name is provided":H.phone&&!P(H.phone)?"Please enter a valid Philippine phone number":"";case"primaryGuardianEmail":return H.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H.email)?"Please enter a valid email address":"";case"secondaryGuardianPhone":return(null==Y?void 0:Y.phone)&&!P(Y.phone)?"Please enter a valid Philippine phone number":"";case"secondaryGuardianEmail":return(null==Y?void 0:Y.email)&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y.email)?"Please enter a valid email address":"";default:return""}},[he,H,Y,c,ye,B,$,b]);r.useEffect(()=>{oe(e=>{const a={...e},t=je("primaryGuardianName",H.fullName);t?a.primaryGuardianName=t:delete a.primaryGuardianName;const r=je("primaryGuardianRelationship",H.relationship);return r?a.primaryGuardianRelationship=r:delete a.primaryGuardianRelationship,a})},[j,H.fullName,H.relationship,he,je]);const Ne=e=>!!ce||(!(!he||"primaryGuardianName"!==e||H.fullName&&H.fullName.trim())||(!(!he||"primaryGuardianRelationship"!==e||H.relationship)||(de[e]||!1))),ke=e=>Ne(e)&&ie[e]||"",Se=(e,a)=>{le(a=>({...a,[e]:!0}));const t=je(e,a);oe(a=>({...a,[e]:t}))},we=(e,a)=>{if(ie[e]&&oe(a=>({...a,[e]:""})),de[e]){const t=je(e,a);oe(a=>({...a,[e]:t}))}};r.useEffect(()=>{B&&ye.length>0?ye.find(e=>e.id===A)||I(ye[0].id):0===ye.length&&I("")},[B,ye,A]);const Pe=()=>{x(""),g(""),v(""),f(""),E(""),M(""),F(""),D(""),z(""),L(""),I(""),_(null),ae([]),re(null),J({country:"Philippines",province:"",city:"",barangay:"",addressLine1:"",addressLine2:""}),K({fullName:"",relationship:"",phone:"",email:"",facebook:""}),Q(void 0)},Ge=e=>{if(c===e||!(p.trim()||h.trim()||b||$||R||X.trim()||O.trim()||T.trim()||B.trim()||A||q.province||q.city||q.barangay||H.fullName.trim()||H.phone.trim()||m))return Pe(),u(e),void(t.length>0&&I(t[0].id));ge(e),xe(!0)};r.useEffect(()=>{d&&(u(!1),x(""),g(""),v(""),f(""),L(""),I(t.length>0?t[0].id:""),E(""),M(""),F(""),D(""),z(""),J({country:"Philippines",province:"",city:"",barangay:"",addressLine1:"",addressLine2:""}),K({fullName:"",relationship:"",phone:"",email:"",facebook:""}),Q(void 0),_(null),re(null))},[d,t]);const Be=s,Le="block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1";return e.jsxs(l,{className:"max-w-3xl mx-auto",children:[e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!ne){se(!0),ue(!0);try{const e=(()=>{const e={};if(c){const a=je("selectedExistingStudentId",m);a&&(e.selectedExistingStudentId=a)}else{const a=je("name",p);a&&(e.name=a);const t=je("gender",R);t&&(e.gender=t);const r=je("birthdate",b);r&&(e.birthdate=r);const n=je("age",$);n&&(e.age=n);const s=je("email",X);s&&(e.email=s);const i=je("contactNumber",O);i&&(e.contactNumber=i)}const a=je("instrument",B);a&&(e.instrument=a);const t=je("instructorId",A);t&&(e.instructorId=t);const r=je("province",q.province);r&&(e.province=r);const n=je("city",q.city);n&&(e.city=n);const s=je("barangay",q.barangay);s&&(e.barangay=s);const i=je("addressLine1",q.addressLine1);i&&(e.addressLine1=i);const o=je("primaryGuardianName",H.fullName);o&&(e.primaryGuardianName=o);const d=je("primaryGuardianRelationship",H.relationship);d&&(e.primaryGuardianRelationship=d);const l=je("primaryGuardianPhone",H.phone);l&&(e.primaryGuardianPhone=l);const u=je("primaryGuardianEmail",H.email);u&&(e.primaryGuardianEmail=u);const x=je("secondaryGuardianPhone",null==Y?void 0:Y.phone);x&&(e.secondaryGuardianPhone=x);const g=je("secondaryGuardianEmail",null==Y?void 0:Y.email);return g&&(e.secondaryGuardianEmail=g),e})();if(oe(e),Object.keys(e).length>0){const a={};Object.keys(e).forEach(e=>{a[e]=!0}),le(e=>({...e,...a}))}const a=Object.values(e).filter(e=>e.length>0);if(a.length>0)return _(`Please fix the following ${a.length} issue${a.length>1?"s":""} before submitting:`),void ae(a);_(null),ae([]),oe({});let t=j;!b&&$&&(t=parseInt($,10)),o({name:p,nickname:h||void 0,birthdate:b||void 0,instrument:B,instructorId:A,age:t,gender:R,email:X||void 0,contactNumber:O?k(O):void 0,facebook:T||void 0,address:{country:q.country,province:q.province||void 0,city:q.city||void 0,barangay:q.barangay||void 0,addressLine1:q.addressLine1,addressLine2:q.addressLine2||void 0},guardianFullName:H.fullName||void 0,guardianPhone:H.phone?k(H.phone):void 0,guardianEmail:H.email||void 0,guardianFacebook:H.facebook||void 0,secondaryGuardian:Y&&(Y.fullName||Y.phone||Y.email)?{fullName:Y.fullName||void 0,relationship:Y.relationship||void 0,phone:Y.phone?k(Y.phone):void 0,email:Y.email||void 0,facebook:Y.facebook||void 0}:void 0,parentStudentId:c?m:void 0})}finally{se(!1)}}},children:[e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-secondary-deep-dark dark:text-brand-secondary mb-2",children:"New Student Enrollment"}),e.jsx("p",{className:"text-text-secondary dark:text-slate-400 mb-6",children:"Fill out the form below to register a new student in the system."}),U&&e.jsxs("div",{className:"bg-status-red-light dark:bg-status-red/20 border border-status-red/20 text-status-red px-4 py-3 rounded-md mb-4 font-medium",role:"alert",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Please fix the following issues:"}),ee.length>0?e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:ee.map((a,t)=>e.jsx("li",{children:a},t))}):e.jsx("div",{children:U})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[e.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Enrollment Type"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"enrollmentType",value:"new",checked:!c,onChange:()=>Ge(!1),className:"sr-only"}),e.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all "+(c?"border-gray-300 dark:border-slate-600 group-hover:border-blue-400":"bg-blue-500 border-blue-500 text-white"),children:!c&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-slate-200 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"New Student"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"enrollmentType",value:"existing",checked:c,onChange:()=>Ge(!0),className:"sr-only"}),e.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all "+(c?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-slate-600 group-hover:border-blue-400"),children:c&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-slate-200 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Existing Student (Different Instrument)"})]})]})]}),c&&e.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[e.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Select Existing Student"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"existingStudent",className:Le,children:"Select Existing Student *"}),e.jsx(w,{error:ke("selectedExistingStudentId"),children:e.jsxs(n,{id:"existingStudent",value:m,onChange:e=>{(e=>{var a;x(e);const t=i.find(a=>a.id===e);t&&(g(t.name),v(t.nickname||""),f(t.birthdate||""),E((null==(a=t.age)?void 0:a.toString())||""),M(t.gender||""),F(t.email||""),D(t.contactNumber||""),z(t.facebook||""),t.address?J({country:t.address.country||"Philippines",province:t.address.province||"",city:t.address.city||"",barangay:t.address.barangay||"",addressLine1:t.address.addressLine1||"",addressLine2:t.address.addressLine2||""}):J({country:"Philippines",province:"",city:"",barangay:"",addressLine1:"",addressLine2:""}),K({fullName:t.guardianFullName||"",relationship:"Parent",phone:t.guardianPhone||"",email:t.guardianEmail||"",facebook:t.guardianFacebook||""}),t.secondaryGuardian?Q({fullName:t.secondaryGuardian.fullName||"",relationship:t.secondaryGuardian.relationship||"",phone:t.secondaryGuardian.phone||"",email:t.secondaryGuardian.email||"",facebook:t.secondaryGuardian.facebook||""}):Q(void 0)),e||(L(""),I(""))})(e.target.value),we("selectedExistingStudentId",e.target.value)},onBlur:e=>Se("selectedExistingStudentId",e.target.value),wrapperClassName:ke("selectedExistingStudentId")?"border-red-500":"",children:[e.jsx("option",{value:"",children:"Choose a student..."}),i.filter(e=>"active"===e.status).sort((e,a)=>e.name.localeCompare(a.name)).map(a=>e.jsxs("option",{value:a.id,children:[a.name," - ",a.instrument," (ID: ",a.studentIdNumber,")"]},a.id))]})}),c&&m&&e.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Student details have been auto-filled. You can select a new instrument and instructor below."})]})]}),e.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[e.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Student Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"studentName",className:Le,children:["Student Full Name ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsx(w,{error:ke("name"),children:e.jsx("input",{type:"text",id:"studentName",value:p,onChange:e=>{g(e.target.value),we("name",e.target.value)},onBlur:e=>Se("name",e.target.value),className:`${Be} ${c?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""} ${ke("name")?"border-red-500 focus:border-red-500":""}`,placeholder:"e.g., Jane Doe",readOnly:c})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nickname",className:Le,children:"Nickname (Optional)"}),e.jsx("input",{type:"text",id:"nickname",value:h,onChange:e=>v(e.target.value),className:`${Be} ${c?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""}`,placeholder:"e.g., Janie",readOnly:c})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"birthdate",className:Le,children:["Birthdate ",0===j?e.jsx("span",{className:"text-status-red",children:"*"}):"(Optional)"]}),e.jsx(w,{error:ke("birthdate"),children:e.jsx("input",{type:"date",id:"birthdate",value:b,onChange:e=>{f(e.target.value),we("birthdate",e.target.value)},onBlur:e=>Se("birthdate",e.target.value),className:`${Be} ${c?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""} ${ke("birthdate")?"border-red-500 focus:border-red-500":""}`,readOnly:c})}),b&&j>0&&e.jsxs("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:["Calculated age: ",j," years old"]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"age",className:Le,children:["Age ",b?"(Auto-calculated)":e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsx(w,{error:ke("age"),children:e.jsx("input",{type:"number",id:"age",value:$,onChange:e=>{E(e.target.value),we("age",e.target.value)},onBlur:e=>Se("age",e.target.value),className:`${Be} ${c||b?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""} ${ke("age")?"border-red-500 focus:border-red-500":""}`,placeholder:"e.g., 14",min:"1",readOnly:c||!!b})}),!b&&e.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Enter age manually or provide birthdate above for auto-calculation"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"gender",className:Le,children:["Gender ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsx(w,{error:ke("gender"),children:e.jsxs(n,{id:"gender",value:R,onChange:e=>{M(e.target.value),we("gender",e.target.value)},onBlur:e=>Se("gender",e.target.value),disabled:c,wrapperClassName:`${c?"bg-surface-subtle dark:bg-slate-800":""} ${ke("gender")?"border-red-500":""}`,children:[e.jsx("option",{value:"",disabled:!0,children:"Select gender..."}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})})]}),he&&e.jsxs("div",{className:"text-sm text-status-yellow bg-status-yellow-light dark:bg-status-yellow/20 px-3 py-2 rounded-md",children:[e.jsx("p",{className:"font-medium",children:"Minor Student Detected"}),e.jsx("p",{children:"This student is under 18 years old. Guardian information is recommended for emergency contact."})]})]}),e.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[e.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Contact Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"email",className:Le,children:"Email Address (Optional)"}),e.jsx("input",{type:"email",id:"email",value:X,onChange:e=>F(e.target.value),className:`${Be} ${c?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""}`,placeholder:"e.g., jane.doe@example.com",readOnly:c})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"contactNumber",className:Le,children:"Student's Contact Number (Optional)"}),e.jsx("input",{type:"tel",id:"contactNumber",value:O,onChange:e=>D(e.target.value),onBlur:()=>!c&&D(e=>y(e)),className:`${Be} ${te?"border-status-red":""} ${c?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""}`,placeholder:"e.g., 0917 123 4567",readOnly:c}),te&&e.jsx("div",{className:"text-xs text-status-red mt-1",children:te}),e.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Philippine format: 09XX XXX XXXX or +63 9XX XXX XXXX (Optional)"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"facebook",className:Le,children:"Facebook Profile (Optional)"}),e.jsx("input",{type:"text",id:"facebook",value:T,onChange:e=>z(e.target.value),className:`${Be} ${c?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""}`,placeholder:"Facebook name or https://facebook.com/...",readOnly:c})]})]})]}),e.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[e.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Address Information"}),e.jsx("p",{className:"text-sm text-text-secondary dark:text-slate-400 -mt-2",children:"Complete address information for records and emergency contact."}),e.jsx(C,{address:q,onChange:J,disabled:c,errors:{province:ke("province"),city:ke("city"),barangay:ke("barangay"),addressLine1:ke("addressLine1")}})]}),e.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[e.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Guardian/Parent Information"}),e.jsx("p",{className:"text-sm text-text-secondary dark:text-slate-400 -mt-2",children:"Emergency contact information. Phone numbers are optional but recommended."}),e.jsx(N,{primaryGuardian:H,secondaryGuardian:Y,onPrimaryGuardianChange:K,onSecondaryGuardianChange:Q,disabled:c,isMinor:he,onBlur:Se,errors:{primaryGuardianName:ke("primaryGuardianName"),primaryGuardianRelationship:ke("primaryGuardianRelationship"),primaryGuardianPhone:ke("primaryGuardianPhone"),primaryGuardianEmail:ke("primaryGuardianEmail")}})]}),e.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[e.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Lesson Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"instrument",className:Le,children:["Instrument ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsx(w,{error:ke("instrument"),children:e.jsxs(n,{id:"instrument",value:B,onChange:e=>{L(e.target.value),we("instrument",e.target.value)},onBlur:e=>Se("instrument",e.target.value),disabled:!Ce||c&&0===be.length,wrapperClassName:ke("instrument")?"border-red-500":"",children:[e.jsx("option",{value:"",disabled:!0,children:Ce?"Select an instrument...":c?"Select an existing student first":"Complete student basic info first"}),Ce&&be.map(a=>e.jsx("option",{value:a,children:a},a)),c&&m&&0===be.length&&e.jsx("option",{disabled:!0,children:"No new instruments available"})]})}),c&&m&&e.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Instruments the student is already enrolled in are not shown."}),!Ce&&!c&&Ne("instrument")&&e.jsx("p",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:"Please complete student name, gender, and age/birthdate first."}),c&&!m&&e.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Select an existing student to choose an instrument."})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"instructorId",className:Le,children:["Assign Instructor ",e.jsx("span",{className:"text-status-red",children:"*"})]}),e.jsx(w,{error:ke("instructorId"),children:e.jsx(n,{id:"instructorId",value:A,onChange:e=>{I(e.target.value),we("instructorId",e.target.value)},onBlur:e=>Se("instructorId",e.target.value),disabled:!fe||0===ye.length,wrapperClassName:ke("instructorId")?"border-red-500":"",children:fe&&B&&ye.length>0?ye.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",a.specialty.join(", "),")"]},a.id)):e.jsx("option",{disabled:!0,children:fe&&B?"No instructors for this instrument":"Select an instrument first"})})}),!fe&&!B&&Ne("instructorId")&&e.jsx("p",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:"Complete previous fields to enable instructor selection."})]})]})]})]})]}),e.jsx("div",{className:"bg-surface-header dark:bg-slate-700/50 p-4 flex justify-end rounded-b-lg border-t border-surface-border dark:border-slate-700",children:e.jsxs("button",{type:"submit",className:"px-6 py-2 rounded-md font-semibold text-text-on-color bg-brand-primary hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:0===t.length||ne,children:[ne&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ne?"Processing...":c?"Enroll in New Instrument":"Enroll Student"]})})]}),e.jsx(S,{isOpen:me,onClose:()=>{ge(null),xe(!1)},onConfirm:()=>{null!==pe&&(Pe(),u(pe),t.length>0&&I(t[0].id),ge(null))},title:"Confirm Enrollment Type Change",message:pe?"Switching to 'Existing Student' will clear all the information you've entered. Are you sure you want to continue?":"Switching to 'New Student' will clear all the information you've entered. Are you sure you want to continue?",confirmText:"Yes, Clear Data",cancelText:"Keep Current Data",type:"warning"})]})},B=()=>{const{activeInstructors:a,students:r,handleRequestEnrollment:n,enrollmentSuccessMessage:s}=t();return e.jsx(G,{instructors:a,students:r,onRequestEnrollment:n,successMessage:s})};export{B as EnrollmentPageWrapper};
