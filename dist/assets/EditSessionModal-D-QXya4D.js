import{j as e,i as s}from"./chat-CI5uTd2o.js";import{r as t}from"./ui-CcSG_NNb.js";import{a}from"./management-5vmWAhZ2.js";import"./vendor-DEQ385Nk.js";import"./calendar-Dp5FPTLB.js";const r=({isOpen:r,onClose:o,onSave:n,student:d})=>{const[l,i]=t.useState(""),[c,m]=t.useState(!1),[u,x]=t.useState(0),[p,b]=t.useState(null);if(t.useEffect(()=>{d&&x(d.sessionsAttended-d.sessionsBilled),r&&(m(!1),i(""),b(null))},[d,r]),!r||!d)return null;const h=()=>{o()},f=a;return e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex justify-center items-center p-4",onClick:h,role:"dialog","aria-modal":"true",children:e.jsxs("div",{onClick:e=>e.stopPropagation(),className:"w-full max-w-sm bg-surface-card dark:bg-slate-800 border border-surface-border dark:border-slate-700 rounded-lg shadow-[0_1px_2px_rgba(16,24,40,0.06),_0_1px_3px_rgba(16,24,40,0.10)] dark:shadow-none max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-surface-border dark:border-slate-700 flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary dark:text-slate-100",children:"Edit Unpaid Sessions"}),e.jsxs("p",{className:"text-text-secondary dark:text-slate-400",children:["For student: ",e.jsx("span",{className:"font-semibold text-brand-secondary",children:d.name})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto thin-scroll",children:e.jsxs("div",{className:"p-6",children:[p&&e.jsx("div",{className:"bg-status-red-light dark:bg-status-red/20 border-status-red/20 text-status-red px-4 py-3 rounded-md mb-4 font-medium",role:"alert",children:p}),c?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"unpaidSessionCount",className:"block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",children:"Unpaid Session Count"}),e.jsx("input",{type:"number",id:"unpaidSessionCount",value:u,onChange:e=>x(parseInt(e.target.value,10)||0),min:"0",className:f,autoFocus:!0})]}):e.jsxs("form",{onSubmit:e=>{e.preventDefault(),l===s?(m(!0),b(null)):b("Incorrect password. Please try again.")},children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1",children:"Admin Password Required"}),e.jsx("input",{type:"password",id:"password",value:l,onChange:e=>i(e.target.value),className:f,required:!0,autoFocus:!0}),e.jsx("button",{type:"submit",className:"mt-4 w-full px-4 py-2 rounded-md font-semibold text-text-on-color bg-brand-primary hover:opacity-90 transition-opacity",children:"Authenticate"})]})]})}),c&&e.jsx("div",{className:"p-4 border-t border-surface-border dark:border-slate-700 flex-shrink-0",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 rounded-md font-semibold text-text-secondary dark:text-slate-300 bg-surface-input dark:bg-slate-600 hover:brightness-95 dark:hover:bg-slate-500 transition-all",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>{n(d.id,u)},className:"px-4 py-2 rounded-md font-semibold text-text-on-color bg-brand-primary hover:opacity-90 transition-opacity",children:"Save Changes"})]})})]})})};export{r as EditSessionModal};
