import{g as e,j as t,u as a}from"./chat-CI5uTd2o.js";import{r}from"./ui-CcSG_NNb.js";import{c as s,v as n,C as i,T as l,a as d,f as o,A as c,G as u}from"./management-5vmWAhZ2.js";import"./vendor-DEQ385Nk.js";import"./calendar-Dp5FPTLB.js";const m=e=>e.replace(/[^\d]/g,""),x=({isOpen:e,onClose:a,onConfirm:r,title:s,message:n,confirmText:i="Continue",cancelText:l="Cancel",type:d="warning"})=>{if(!e)return null;const o=(()=>{switch(d){case"danger":return{icon:"⚠️",iconBg:"bg-red-100 dark:bg-red-900/20",iconColor:"text-red-600 dark:text-red-400",confirmBtn:"bg-red-600 hover:bg-red-700 focus:ring-red-500"};case"warning":return{icon:"⚠️",iconBg:"bg-yellow-100 dark:bg-yellow-900/20",iconColor:"text-yellow-600 dark:text-yellow-400",confirmBtn:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"};default:return{icon:"ℹ️",iconBg:"bg-blue-100 dark:bg-blue-900/20",iconColor:"text-blue-600 dark:text-blue-400",confirmBtn:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}}})();return t.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),t.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:t.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white dark:bg-slate-800 shadow-xl transition-all",children:[t.jsxs("div",{className:"px-6 py-4",children:[t.jsx("div",{className:"flex items-center",children:t.jsx("div",{className:`mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ${o.iconBg}`,children:t.jsx("span",{className:`text-2xl ${o.iconColor}`,children:o.icon})})}),t.jsxs("div",{className:"mt-3 text-center",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s}),t.jsx("div",{className:"mt-2",children:t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:n})})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-3 flex flex-col-reverse gap-2 sm:flex-row sm:gap-3 rounded-b-lg",children:[t.jsx("button",{type:"button",className:"w-full rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2",onClick:a,children:l}),t.jsx("button",{type:"button",className:`w-full rounded-md px-4 py-2 text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${o.confirmBtn}`,onClick:()=>{r(),a()},children:i})]})]})})]})},h=({error:e,children:a})=>{const r=e&&e.length>0;return t.jsxs("div",{className:"relative",children:[a,r&&t.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1 animate-fadeIn",children:e})]})},p=e=>n(e),g=({instructors:a,students:n,onRequestEnrollment:g,successMessage:b})=>{const[f,y]=r.useState(!1),[v,N]=r.useState(""),[j,k]=r.useState(""),[S,w]=r.useState(""),[G,C]=r.useState(""),[E,P]=r.useState(0),[I,$]=r.useState(""),[L,F]=r.useState(a.length>0?a[0].id:""),[B,O]=r.useState(""),[X,R]=r.useState(""),[q,A]=r.useState(""),[M,D]=r.useState(""),[T,z]=r.useState(""),[Y,J]=r.useState({country:"Philippines",province:"",city:"",barangay:"",addressLine1:"",addressLine2:""}),[H,K]=r.useState({fullName:"",relationship:"",phone:"",email:"",facebook:""}),[V,W]=r.useState(void 0),Z=e=>{J({country:e.country||"Philippines",province:e.province||"",city:e.city||"",barangay:e.barangay||"",addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||""})},Q=e=>{K({fullName:e.fullName||"",relationship:e.relationship||"",phone:e.phone||"",email:e.email||"",facebook:e.facebook||""})},U=e=>{W(e)},[_,ee]=r.useState(null),[te,ae]=r.useState([]),[re,se]=r.useState(null),[ne,ie]=r.useState(!1),[le,de]=r.useState({}),[oe,ce]=r.useState({}),[ue,me]=r.useState(!1),[xe,he]=r.useState(!1),[pe,ge]=r.useState(null);r.useEffect(()=>{if(G){const e=s(new Date(G));P(e),O(e.toString())}},[G]);const be=E>0&&E<18,fe=r.useMemo(()=>{if(!f||!v)return[];const e=n.find(e=>e.id===v);if(!e)return[];const t=e.parentStudentId||e.id,a=n.find(e=>e.id===t),r=a?[a.instrument]:[];return n.forEach(e=>{e.parentStudentId===t&&r.push(e.instrument)}),r},[v,n,f]),ye=r.useMemo(()=>f?e.filter(e=>!fe.includes(e)):e,[fe,f]),ve=r.useMemo(()=>I?a.filter(e=>Array.isArray(e.specialty)&&e.specialty.includes(I)):a,[I,a]),Ne=r.useMemo(()=>f?!!v:!(!j.trim()||!X||!G&&!B),[f,v,j,X,G,B]),je=r.useMemo(()=>Ne&&!!I,[Ne,I]),ke=r.useCallback((e,t)=>{switch(e){case"selectedExistingStudentId":return f&&!t?"Please select an existing student":"";case"name":if(!f){const e=String(t||"");if(!e||!e.trim())return"Student name is required";if(e.trim().length<2)return"Name must be at least 2 characters";if(!/^[a-zA-Z\s\-.]+$/.test(e.trim()))return"Name can only contain letters, spaces, hyphens, and periods"}return"";case"gender":return f||t?"":"Gender selection is required";case"birthdate":if(!f){if(!t&&!B)return"Either birthdate or age is required";if(t){const e=String(t),a=new Date(e),r=new Date;if(a>r)return"Birthdate cannot be in the future";const s=r.getFullYear()-a.getFullYear();if(s>100)return"Please verify the birthdate (age seems too high)";if(s<3)return"Student must be at least 3 years old"}}return"";case"age":if(!f&&!G&&t){const e=String(t),a=parseInt(e,10);if(isNaN(a))return"Age must be a valid number";if(a<3)return"Student must be at least 3 years old";if(a>100)return"Please verify the age"}return"";case"email":if(t){const e=String(t);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return"Please enter a valid email address"}return"";case"contactNumber":if(t){const e=String(t);if(!p(e))return"Please enter a valid Philippine phone number (e.g., 09123456789)"}return"";case"instrument":return t?"":"Instrument selection is required";case"instructorId":return t?I&&0===ve.length?"No instructors available for selected instrument":"":"Instructor selection is required";case"addressLine1":{const e=String(t||"");return e&&e.trim()?e.trim().length<5?"Please provide a complete street address":"":"Street address is required"}case"province":return t?"":"Province selection is required";case"city":return t?"":"City/Municipality selection is required";case"barangay":return t?"":"Barangay selection is required";case"primaryGuardianName":if(be){if(!H.fullName||!H.fullName.trim())return"Guardian name is required for students under 18";if(H.fullName.trim().length<2)return"Guardian name must be at least 2 characters"}else{if(H.fullName&&!H.fullName.trim())return"Guardian name cannot be empty if provided";if(H.fullName&&H.fullName.trim().length<2)return"Guardian name must be at least 2 characters"}return"";case"primaryGuardianRelationship":if(be){if(!H.relationship)return"Guardian relationship is required for students under 18"}else if(H.fullName&&!H.relationship)return"Guardian relationship is required when guardian name is provided";return"";case"primaryGuardianPhone":return H.fullName&&!H.phone?"Guardian phone is required when guardian name is provided":H.phone&&!p(H.phone)?"Please enter a valid Philippine phone number":"";case"primaryGuardianEmail":return H.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H.email)?"Please enter a valid email address":"";case"secondaryGuardianPhone":return(null==V?void 0:V.phone)&&!p(V.phone)?"Please enter a valid Philippine phone number":"";case"secondaryGuardianEmail":return(null==V?void 0:V.email)&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V.email)?"Please enter a valid email address":"";default:return""}},[be,H,V,f,ve,I,B,G]);r.useEffect(()=>{be&&de(e=>{const t={...e},a=ke("primaryGuardianName",H.fullName);a&&(t.primaryGuardianName=a);const r=ke("primaryGuardianRelationship",H.relationship);return r&&(t.primaryGuardianRelationship=r),t})},[be,ke,H.fullName,H.relationship]);r.useEffect(()=>{de(e=>{const t={...e},a=ke("primaryGuardianName",H.fullName);a?t.primaryGuardianName=a:delete t.primaryGuardianName;const r=ke("primaryGuardianRelationship",H.relationship);return r?t.primaryGuardianRelationship=r:delete t.primaryGuardianRelationship,t})},[E,H.fullName,H.relationship,be,ke]);const Se=e=>!!ue||(!(!be||"primaryGuardianName"!==e||H.fullName&&H.fullName.trim())||(!(!be||"primaryGuardianRelationship"!==e||H.relationship)||(oe[e]||!1))),we=e=>{if(!Se(e))return"";if(be&&"primaryGuardianName"===e&&!le[e]){const e=ke("primaryGuardianName",H.fullName);if(e)return e}if(be&&"primaryGuardianRelationship"===e&&!le[e]){const e=ke("primaryGuardianRelationship",H.relationship);if(e)return e}return le[e]||""},Ge=(e,t)=>{ce(t=>({...t,[e]:!0}));const a=ke(e,t);de(t=>({...t,[e]:a}))},Ce=(e,t)=>{if(le[e]&&de(t=>({...t,[e]:""})),oe[e]){const a=ke(e,t);de(t=>({...t,[e]:a}))}};r.useEffect(()=>{I&&ve.length>0?ve.find(e=>e.id===L)||F(ve[0].id):0===ve.length&&F("")},[I,ve,L]);const Ee=()=>{N(""),k(""),w(""),C(""),O(""),R(""),A(""),D(""),z(""),$(""),F(""),ee(null),ae([]),se(null),Z({country:"Philippines",province:"",city:"",barangay:"",addressLine1:"",addressLine2:""}),Q({fullName:"",relationship:"",phone:"",email:"",facebook:""}),U(void 0)},Pe=e=>{if(f===e||!(j.trim()||S.trim()||G||B||X||q.trim()||M.trim()||T.trim()||I.trim()||L||Y.province||Y.city||Y.barangay||H.fullName.trim()||H.phone.trim()||v))return Ee(),y(e),void(a.length>0&&F(a[0].id));ge(e),he(!0)};r.useEffect(()=>{b&&(y(!1),N(""),k(""),w(""),C(""),$(""),F(a.length>0?a[0].id:""),O(""),R(""),A(""),D(""),z(""),Z({country:"Philippines",province:"",city:"",barangay:"",addressLine1:"",addressLine2:""}),Q({fullName:"",relationship:"",phone:"",email:"",facebook:""}),U(void 0),ee(null),se(null))},[b,a]);const Ie=d,$e="block text-sm font-medium text-text-secondary dark:text-slate-400 mb-1";return t.jsxs(i,{className:"max-w-3xl mx-auto",children:[t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!ne){ie(!0),me(!0);try{const e=(()=>{const e={};if(f){const t=ke("selectedExistingStudentId",v);t&&(e.selectedExistingStudentId=t)}else{const t=ke("name",j);t&&(e.name=t);const a=ke("gender",X);a&&(e.gender=a);const r=ke("birthdate",G);r&&(e.birthdate=r);const s=ke("age",B);s&&(e.age=s);const n=ke("email",q);n&&(e.email=n);const i=ke("contactNumber",M);i&&(e.contactNumber=i)}const t=ke("instrument",I);t&&(e.instrument=t);const a=ke("instructorId",L);a&&(e.instructorId=a);const r=ke("province",Y.province);r&&(e.province=r);const s=ke("city",Y.city);s&&(e.city=s);const n=ke("barangay",Y.barangay);n&&(e.barangay=n);const i=ke("addressLine1",Y.addressLine1);i&&(e.addressLine1=i);const l=ke("primaryGuardianName",H.fullName);l&&(e.primaryGuardianName=l);const d=ke("primaryGuardianRelationship",H.relationship);d&&(e.primaryGuardianRelationship=d);const o=ke("primaryGuardianPhone",H.phone);o&&(e.primaryGuardianPhone=o);const c=ke("primaryGuardianEmail",H.email);c&&(e.primaryGuardianEmail=c);const u=ke("secondaryGuardianPhone",null==V?void 0:V.phone);u&&(e.secondaryGuardianPhone=u);const m=ke("secondaryGuardianEmail",null==V?void 0:V.email);return m&&(e.secondaryGuardianEmail=m),e})();if(de(e),Object.keys(e).length>0){const t={};Object.keys(e).forEach(e=>{t[e]=!0}),ce(e=>({...e,...t}))}const t=Object.values(e).filter(e=>e.length>0);if(t.length>0)return ee(`Please fix the following ${t.length} issue${t.length>1?"s":""} before submitting:`),void ae(t);ee(null),ae([]),de({});let a=E;!G&&B&&(a=parseInt(B,10)),g({name:j,nickname:S||void 0,birthdate:G||void 0,instrument:I,instructorId:L,age:a,gender:X,email:q||void 0,contactNumber:M?m(M):void 0,facebook:T||void 0,address:{country:Y.country,province:Y.province||void 0,city:Y.city||void 0,barangay:Y.barangay||void 0,addressLine1:Y.addressLine1,addressLine2:Y.addressLine2||void 0},guardianFullName:H.fullName||void 0,guardianRelationship:H.relationship||void 0,guardianPhone:H.phone?m(H.phone):void 0,guardianEmail:H.email||void 0,guardianFacebook:H.facebook||void 0,secondaryGuardian:V&&(V.fullName||V.phone||V.email)?{fullName:V.fullName||void 0,relationship:V.relationship||void 0,phone:V.phone?m(V.phone):void 0,email:V.email||void 0,facebook:V.facebook||void 0}:void 0,parentStudentId:f?v:void 0})}finally{ie(!1)}}},children:[t.jsxs("div",{className:"p-6 sm:p-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-brand-secondary-deep-dark dark:text-brand-secondary mb-2",children:"New Student Enrollment"}),t.jsx("p",{className:"text-text-secondary dark:text-slate-400 mb-6",children:"Fill out the form below to register a new student in the system."}),_&&t.jsxs("div",{className:"bg-status-red-light dark:bg-status-red/20 border border-status-red/20 text-status-red px-4 py-3 rounded-md mb-4 font-medium",role:"alert",children:[t.jsx("div",{className:"font-semibold mb-2",children:"Please fix the following issues:"}),te.length>0?t.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:te.map((e,a)=>t.jsx("li",{children:e},a))}):t.jsx("div",{children:_})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[t.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Enrollment Type"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors group",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"radio",name:"enrollmentType",value:"new",checked:!f,onChange:()=>Pe(!1),className:"sr-only"}),t.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all "+(f?"border-gray-300 dark:border-slate-600 group-hover:border-blue-400":"bg-blue-500 border-blue-500 text-white"),children:!f&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),t.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-slate-200 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"New Student"})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors group",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"radio",name:"enrollmentType",value:"existing",checked:f,onChange:()=>Pe(!0),className:"sr-only"}),t.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all "+(f?"bg-blue-500 border-blue-500 text-white":"border-gray-300 dark:border-slate-600 group-hover:border-blue-400"),children:f&&t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),t.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-slate-200 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Existing Student (Different Instrument)"})]})]})]}),f&&t.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[t.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Select Existing Student"}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"existingStudent",className:$e,children:"Select Existing Student *"}),t.jsx(h,{error:we("selectedExistingStudentId"),children:t.jsxs(l,{id:"existingStudent",value:v,onChange:e=>{(e=>{var t;N(e);const a=n.find(t=>t.id===e);a&&(k(a.name),w(a.nickname||""),C(a.birthdate||""),O((null==(t=a.age)?void 0:t.toString())||""),R(a.gender||""),A(a.email||""),D(a.contactNumber||""),z(a.facebook||""),a.address?Z({country:a.address.country||"Philippines",province:a.address.province||"",city:a.address.city||"",barangay:a.address.barangay||"",addressLine1:a.address.addressLine1||"",addressLine2:a.address.addressLine2||""}):Z({country:"Philippines",province:"",city:"",barangay:"",addressLine1:"",addressLine2:""}),Q({fullName:a.guardianFullName||"",relationship:"Parent",phone:a.guardianPhone||"",email:a.guardianEmail||"",facebook:a.guardianFacebook||""}),a.secondaryGuardian?U({fullName:a.secondaryGuardian.fullName||"",relationship:a.secondaryGuardian.relationship||"",phone:a.secondaryGuardian.phone||"",email:a.secondaryGuardian.email||"",facebook:a.secondaryGuardian.facebook||""}):U(void 0)),e||($(""),F(""))})(e.target.value),Ce("selectedExistingStudentId",e.target.value)},onBlur:e=>Ge("selectedExistingStudentId",e.target.value),wrapperClassName:we("selectedExistingStudentId")?"border-red-500":"",children:[t.jsx("option",{value:"",children:"Choose a student..."}),n.filter(e=>"active"===e.status).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>t.jsxs("option",{value:e.id,children:[e.name," - ",e.instrument," (ID: ",e.studentIdNumber,")"]},e.id))]})}),f&&v&&t.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Student details have been auto-filled. You can select a new instrument and instructor below."})]})]}),t.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[t.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Student Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"studentName",className:$e,children:["Student Full Name ",t.jsx("span",{className:"text-status-red",children:"*"})]}),t.jsx(h,{error:we("name"),children:t.jsx("input",{type:"text",id:"studentName",value:j,onChange:e=>{k(e.target.value),Ce("name",e.target.value)},onBlur:e=>Ge("name",e.target.value),className:`${Ie} ${f?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""} ${we("name")?"border-red-500 focus:border-red-500":""}`,placeholder:"e.g., Jane Doe",readOnly:f})})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"nickname",className:$e,children:"Nickname (Optional)"}),t.jsx("input",{type:"text",id:"nickname",value:S,onChange:e=>w(e.target.value),className:`${Ie} ${f?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""}`,placeholder:"e.g., Janie",readOnly:f})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"birthdate",className:$e,children:["Birthdate ",0===E?t.jsx("span",{className:"text-status-red",children:"*"}):"(Optional)"]}),t.jsx(h,{error:we("birthdate"),children:t.jsx("input",{type:"date",id:"birthdate",value:G,onChange:e=>{C(e.target.value),Ce("birthdate",e.target.value)},onBlur:e=>Ge("birthdate",e.target.value),className:`${Ie} ${f?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""} ${we("birthdate")?"border-red-500 focus:border-red-500":""}`,readOnly:f})}),G&&E>0&&t.jsxs("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:["Calculated age: ",E," years old"]})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"age",className:$e,children:["Age ",G?"(Auto-calculated)":t.jsx("span",{className:"text-status-red",children:"*"})]}),t.jsx(h,{error:we("age"),children:t.jsx("input",{type:"number",id:"age",value:B,onChange:e=>{O(e.target.value),Ce("age",e.target.value)},onBlur:e=>Ge("age",e.target.value),className:`${Ie} ${f||G?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""} ${we("age")?"border-red-500 focus:border-red-500":""}`,placeholder:"e.g., 14",min:"1",readOnly:f||!!G})}),!G&&t.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Enter age manually or provide birthdate above for auto-calculation"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"gender",className:$e,children:["Gender ",t.jsx("span",{className:"text-status-red",children:"*"})]}),t.jsx(h,{error:we("gender"),children:t.jsxs(l,{id:"gender",value:X,onChange:e=>{R(e.target.value),Ce("gender",e.target.value)},onBlur:e=>Ge("gender",e.target.value),disabled:f,wrapperClassName:`${f?"bg-surface-subtle dark:bg-slate-800":""} ${we("gender")?"border-red-500":""}`,children:[t.jsx("option",{value:"",disabled:!0,children:"Select gender..."}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"})]})})]}),be&&t.jsxs("div",{className:"text-sm text-status-yellow bg-status-yellow-light dark:bg-status-yellow/20 px-3 py-2 rounded-md",children:[t.jsx("p",{className:"font-medium",children:"Minor Student Detected"}),t.jsx("p",{children:"This student is under 18 years old. Guardian information is recommended for emergency contact."})]})]}),t.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[t.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Contact Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{htmlFor:"email",className:$e,children:"Email Address (Optional)"}),t.jsx("input",{type:"email",id:"email",value:q,onChange:e=>A(e.target.value),className:`${Ie} ${f?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""}`,placeholder:"e.g., jane.doe@example.com",readOnly:f})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{htmlFor:"contactNumber",className:$e,children:"Student's Contact Number (Optional)"}),t.jsx("input",{type:"tel",id:"contactNumber",value:M,onChange:e=>D(e.target.value),onBlur:()=>!f&&D(e=>o(e)),className:`${Ie} ${re?"border-status-red":""} ${f?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""}`,placeholder:"e.g., 0917 123 4567",readOnly:f}),re&&t.jsx("div",{className:"text-xs text-status-red mt-1",children:re}),t.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Philippine format: 09XX XXX XXXX or +63 9XX XXX XXXX (Optional)"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{htmlFor:"facebook",className:$e,children:"Facebook Profile (Optional)"}),t.jsx("input",{type:"text",id:"facebook",value:T,onChange:e=>z(e.target.value),className:`${Ie} ${f?"bg-surface-subtle dark:bg-slate-800 text-text-secondary dark:text-slate-400":""}`,placeholder:"Facebook name or https://facebook.com/...",readOnly:f})]})]})]}),t.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[t.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Address Information"}),t.jsx("p",{className:"text-sm text-text-secondary dark:text-slate-400 -mt-2",children:"Complete address information for records and emergency contact."}),t.jsx(c,{address:Y,onChange:Z,disabled:f,errors:{province:we("province"),city:we("city"),barangay:we("barangay"),addressLine1:we("addressLine1")}})]}),t.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[t.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Guardian/Parent Information"}),t.jsx("p",{className:"text-sm text-text-secondary dark:text-slate-400 -mt-2",children:"Emergency contact information. Phone numbers are optional but recommended."}),t.jsx(u,{primaryGuardian:H,secondaryGuardian:V,onPrimaryGuardianChange:Q,onSecondaryGuardianChange:U,disabled:f,isMinor:be,onBlur:Ge,errors:{primaryGuardianName:we("primaryGuardianName"),primaryGuardianRelationship:we("primaryGuardianRelationship"),primaryGuardianPhone:we("primaryGuardianPhone"),primaryGuardianEmail:we("primaryGuardianEmail")}})]}),t.jsxs("fieldset",{className:"space-y-4 p-4 border border-surface-border dark:border-slate-700 rounded-md",children:[t.jsx("legend",{className:"text-lg font-semibold text-text-primary dark:text-slate-200 px-2",children:"Lesson Assignment"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"instrument",className:$e,children:["Instrument ",t.jsx("span",{className:"text-status-red",children:"*"})]}),t.jsx(h,{error:we("instrument"),children:t.jsxs(l,{id:"instrument",value:I,onChange:e=>{$(e.target.value),Ce("instrument",e.target.value)},onBlur:e=>Ge("instrument",e.target.value),disabled:!Ne||f&&0===ye.length,wrapperClassName:we("instrument")?"border-red-500":"",children:[t.jsx("option",{value:"",disabled:!0,children:Ne?"Select an instrument...":f?"Select an existing student first":"Complete student basic info first"}),Ne&&ye.map(e=>t.jsx("option",{value:e,children:e},e)),f&&v&&0===ye.length&&t.jsx("option",{disabled:!0,children:"No new instruments available"})]})}),f&&v&&t.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Instruments the student is already enrolled in are not shown."}),!Ne&&!f&&Se("instrument")&&t.jsx("p",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:"Please complete student name, gender, and age/birthdate first."}),f&&!v&&t.jsx("p",{className:"text-xs text-text-secondary dark:text-slate-400 mt-1",children:"Select an existing student to choose an instrument."})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"instructorId",className:$e,children:["Assign Instructor ",t.jsx("span",{className:"text-status-red",children:"*"})]}),t.jsx(h,{error:we("instructorId"),children:t.jsx(l,{id:"instructorId",value:L,onChange:e=>{F(e.target.value),Ce("instructorId",e.target.value)},onBlur:e=>Ge("instructorId",e.target.value),disabled:!je||0===ve.length,wrapperClassName:we("instructorId")?"border-red-500":"",children:je&&I&&ve.length>0?ve.map(e=>t.jsxs("option",{value:e.id,children:[e.name," (",e.specialty.join(", "),")"]},e.id)):t.jsx("option",{disabled:!0,children:je&&I?"No instructors for this instrument":"Select an instrument first"})})}),!je&&!I&&Se("instructorId")&&t.jsx("p",{className:"text-xs text-status-red dark:text-red-400 mt-1",children:"Complete previous fields to enable instructor selection."})]})]})]})]})]}),t.jsx("div",{className:"bg-surface-header dark:bg-slate-700/50 p-4 flex justify-end rounded-b-lg border-t border-surface-border dark:border-slate-700",children:t.jsxs("button",{type:"submit",className:"px-6 py-2 rounded-md font-semibold text-text-on-color bg-brand-primary hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:0===a.length||ne,children:[ne&&t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ne?"Processing...":f?"Enroll in New Instrument":"Enroll Student"]})})]}),t.jsx(x,{isOpen:xe,onClose:()=>{ge(null),he(!1)},onConfirm:()=>{null!==pe&&(Ee(),y(pe),a.length>0&&F(a[0].id),ge(null))},title:"Confirm Enrollment Type Change",message:pe?"Switching to 'Existing Student' will clear all the information you've entered. Are you sure you want to continue?":"Switching to 'New Student' will clear all the information you've entered. Are you sure you want to continue?",confirmText:"Yes, Clear Data",cancelText:"Keep Current Data",type:"warning"})]})},b=()=>{const{activeInstructors:e,students:r,handleRequestEnrollment:s,enrollmentSuccessMessage:n}=a();return t.jsx(g,{instructors:e,students:r,onRequestEnrollment:s,successMessage:n})};export{b as EnrollmentPageWrapper};
